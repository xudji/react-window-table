"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=function(){},i=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).measureWrapperHeight=function(){var e=document.body.getBoundingClientRect().height||0;return Math.round(e-t.getViewportHeight())},t.getViewportHeight=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},t.getProgress=function(){var e=window.pageYOffset||document.documentElement.scrollTop;return Math.round(e/t.measureWrapperHeight()*100)},t}return n(t,e),r(t,[{key:"rootSelector",get:function(){return window}}]),t}(o),u=function(e){function t(t){var r,n=t.rootEl,o=t.targetEl;return(r=e.call(this)||this).measureWrapperHeight=function(){var e,t=(null==(e=r.targetEl)?void 0:e.getBoundingClientRect().height)||0;return Math.round(t-r.getViewportHeight())},r.getViewportHeight=function(){var e;return(null==(e=r.rootEl)?void 0:e.clientHeight)||0},r.getProgress=function(){var e,t=(null==(e=r.rootEl)?void 0:e.scrollTop)||0;return Math.round(t/r.measureWrapperHeight()*100)},r.rootEl=document.querySelector(n),r.targetEl=document.querySelector(o),r}return n(t,e),r(t,[{key:"rootSelector",get:function(){return this.rootEl}}]),t}(o),l=function(){function e(e){var t=this,r=e.rootEl,n=e.targetEl;this.getViewportHeight=function(){return t.rp.getViewportHeight()},this.getProgress=function(){return t.rp.getProgress()},this.rp="string"==typeof r&&"string"==typeof n?new u({rootEl:r,targetEl:n}):new i}return r(e,[{key:"rootSelector",get:function(){return this.rp.rootSelector}}]),e}(),c=function(t){var r,n=e.useRef();e.useEffect((function(){n.current=new l({rootEl:null==t?void 0:t.rootEl,targetEl:null==t?void 0:t.targetEl})}),[t]);var o,i,u,c=e.useState((null==(r=n.current)?void 0:r.getProgress())||0),s=c[0],g=c[1],a=e.useCallback((function(){var e;g((null==(e=n.current)?void 0:e.getProgress())||0)}),[]),f=e.useCallback((o=function(){a()},i=null,u=function(e){return function(){o.apply(void 0,e)}},function(){i&&cancelAnimationFrame(i);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i=requestAnimationFrame(u(t))}),[]);return e.useEffect((function(){var e;return null!=(e=n.current)&&e.rootSelector&&n.current.rootSelector.addEventListener("scroll",f),window.addEventListener("resize",f),a(),function(){var e;null!=(e=n.current)&&e.rootSelector&&n.current.rootSelector.removeEventListener("scroll",f),window.removeEventListener("resize",f)}}),[a,f]),{value:s}},s=function(){},g=function(e){function t(t){var r;return(r=e.call(this)||this).el=t,r}n(t,e);var o=t.prototype;return o.isScrolledToBottom=function(){return this.scrollTop+this.outerHeight>=this.scrollHeight},o.registerScrollEvent=function(e){this.el.addEventListener("scroll",e)},o.unregisterScrollEvent=function(e){this.el.removeEventListener("scroll",e)},t.create=function(e){var r=document.querySelector(e);if(!r)throw new Error("element is not found.");return new t(r)},r(t,[{key:"top",get:function(){return this.el.getBoundingClientRect().top}},{key:"outerHeight",get:function(){return this.el.getBoundingClientRect().height}},{key:"scrollTop",get:function(){return this.el.scrollTop}},{key:"scrollHeight",get:function(){return this.el.scrollHeight}}]),t}(s),a=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.isScrolledToBottom=function(){return this.scrollTop+this.outerHeight>=this.scrollHeight},o.registerScrollEvent=function(e){document.addEventListener("scroll",e)},o.unregisterScrollEvent=function(e){document.removeEventListener("scroll",e)},t.create=function(){return new t},r(t,[{key:"outerHeight",get:function(){return window.innerHeight}},{key:"scrollTop",get:function(){return document.documentElement.scrollTop}},{key:"scrollHeight",get:function(){return document.documentElement.scrollHeight}}]),t}(s),f=function(){function e(){}return e.create=function(e){return e?g.create(e):a.create()},e}(),d=function(t){var r=t.sectionRefs,n=t.rootSelector,o=t.offset,i=void 0===o?0:o,u=e.useRef(null);e.useEffect((function(){u.current=f.create(n)}),[n]);var l=e.useCallback((function(){return!!u.current&&u.current.isScrolledToBottom()}),[u]),c=e.useCallback((function(e){if(!u.current)return!1;var t=u.current.scrollTop,r=t+u.current.outerHeight,n=e.getBoundingClientRect(),o=u.current instanceof g?t+n.top-u.current.top+i:t+n.top+i;return[o<r,o+n.height>t].every((function(e){return e}))}),[u,i]),s=e.useCallback((function(){return r.map((function(e){return!!e.current&&c(e.current)}))}),[c,r]),a=e.useState([]),d=a[0],h=a[1],P=e.useMemo((function(){return d.findIndex((function(e){return e}))}),[d]),v=e.useCallback((function(){var e=l()?[].concat(new Array(r.length-1).fill(!1).map((function(e){return e})),[!0]):s();h(e)}),[s,l,r]);return e.useEffect((function(){return v(),u.current&&u.current.registerScrollEvent(v),function(){u.current&&u.current.unregisterScrollEvent(v)}}),[v]),{elementsStatusInViewport:d,currentElementIndexInViewport:P}},h=function(e){var t=this,r=e.currentPage,n=e.totalPage,o=e.middlePagesSiblingCount,i=void 0===o?2:o,u=e.edgePageCount,l=void 0===u?2:u;this.getAllPages=function(){return[].concat(Array(t.totalPage)).fill(1).map((function(e,t){return t+1}))},this.getMiddlePageCount=function(){return 2*t.middlePagesSiblingCount+1},this.isReachedToFirst=function(){return t.currentPage<=t.middlePagesSiblingCount},this.isReachedToLast=function(){return t.currentPage+t.middlePagesSiblingCount>=t.totalPage},this.getAllPreviousPages=function(){return t.getAllPages().slice(0,t.getMiddlePages()[0]-1)},this.getAllNextPages=function(){var e=t.getAllPages(),r=t.getMiddlePages();return e.slice(r[r.length-1],e[e.length])},this.hasPreviousPage=function(){return t.currentPage>1},this.hasNextPage=function(){return t.totalPage>t.currentPage},this.getMiddlePages=function(){var e=t.getAllPages(),r=t.getMiddlePageCount();return t.isReachedToFirst()?e.slice(0,r):t.isReachedToLast()?e.slice(-r):e.slice(t.currentPage-t.middlePagesSiblingCount-1,t.currentPage+t.middlePagesSiblingCount)},this.getPreviousPages=function(){return t.isReachedToFirst()||t.getAllPreviousPages().length<1?[]:t.getAllPages().slice(0,t.edgePageCount).filter((function(e){return!t.getMiddlePages().includes(e)}))},this.getNextPages=function(){if(t.isReachedToLast())return[];if(t.getAllNextPages().length<1)return[];var e=t.getAllPages();return e.slice(e.length-t.edgePageCount,e.length).filter((function(e){return!t.getMiddlePages().includes(e)}))},this.isPreviousTruncable=function(){return t.getAllPreviousPages().filter((function(e){return!t.getPreviousPages().includes(e)&&!t.getMiddlePages().includes(e)})).length>0},this.isNextTruncable=function(){return t.getAllNextPages().filter((function(e){return!t.getNextPages().includes(e)&&!t.getMiddlePages().includes(e)})).length>0},this.currentPage=r,this.totalPage=n,this.middlePagesSiblingCount=i,this.edgePageCount=l},P=function(t){var r=t.totalPage,n=t.currentPage,o=t.middlePagesSiblingCount,i=void 0===o?2:o,u=t.edgePageCount,l=void 0===u?2:u,c=e.useMemo((function(){return new h({totalPage:r,currentPage:n,middlePagesSiblingCount:i,edgePageCount:l})}),[r,n,i,l]);return{getMiddlePages:c.getMiddlePages,hasPreviousPage:c.hasPreviousPage,hasNextPage:c.hasNextPage,getPreviousPages:c.getPreviousPages,getNextPages:c.getNextPages,isPreviousTruncable:c.isPreviousTruncable,isNextTruncable:c.isNextTruncable,totalPage:r,currentPage:n}};exports.Pagination=function(e){return(0,e.children)(P({totalPage:e.totalPage,currentPage:e.currentPage,middlePagesSiblingCount:e.middlePagesSiblingCount,edgePageCount:e.edgePageCount}))},exports.ReadingProgress=function(e){return(0,e.children)(c({targetEl:e.targetEl,rootEl:e.rootEl}))},exports.Scrollspy=function(e){var t=e.children,r=d({sectionRefs:e.sectionRefs,rootSelector:e.rootSelector,offset:e.offset});return t({elementsStatusInViewport:r.elementsStatusInViewport,currentElementIndexInViewport:r.currentElementIndexInViewport})},exports.usePagination=P,exports.useReadingProgress=c,exports.useScrollspy=d;
//# sourceMappingURL=ghostui.cjs.production.min.js.map
