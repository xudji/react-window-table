{"version":3,"file":"ghostui.esm.js","sources":["../src/utils/optimization/index.ts","../src/ReadingProgress/core.ts","../src/ReadingProgress/useReadingProgress.ts","../src/ReadingProgress/index.tsx","../src/Scrollspy/type.ts","../src/Scrollspy/RootEl.ts","../src/Scrollspy/RootWindow.ts","../src/Scrollspy/RootFactory.ts","../src/Scrollspy/useScrollspy.ts","../src/Scrollspy/index.tsx","../src/Pagination/core.ts","../src/Pagination/usePagination.ts","../src/Pagination/index.tsx"],"sourcesContent":["export const debounce = <F extends Function>(callback: F) => {\n  let reqID: number | null = null;\n\n  const exec = (args: F['arguments']) => () => {\n    // @ts-ignore TS2488\n    callback(...args);\n  };\n\n  return (...args: F['arguments']) => {\n    if (reqID) {\n      cancelAnimationFrame(reqID);\n    }\n    reqID = requestAnimationFrame(exec(args));\n  };\n};\n\nexport const throttle = <F extends Function>(callback: F) => {\n  let reqID: number | null = null;\n\n  const exec = (args: F['arguments']) => () => {\n    // @ts-ignore TS2488\n    callback(...args);\n    reqID = null;\n  };\n\n  return (...args: F['arguments']) => {\n    if (!reqID) {\n      reqID = requestAnimationFrame(exec(args));\n    }\n  };\n};\n","abstract class ReadingProgressCore {\n  abstract get rootSelector():\n    | (Window & typeof globalThis)\n    | HTMLElement\n    | null;\n\n  abstract getProgress: () => number;\n  abstract getViewportHeight: () => number;\n}\n\nclass ReadingProgressWindow extends ReadingProgressCore {\n  get rootSelector() {\n    return window;\n  }\n\n  private measureWrapperHeight = () => {\n    const targetElHeihgt = document.body.getBoundingClientRect().height || 0;\n\n    return Math.round(targetElHeihgt - this.getViewportHeight());\n  };\n\n  getViewportHeight = () => {\n    return Math.max(\n      document.documentElement.clientHeight,\n      window.innerHeight || 0\n    );\n  };\n\n  getProgress = () => {\n    const top = window.pageYOffset || document.documentElement.scrollTop;\n\n    return Math.round((top / this.measureWrapperHeight()) * 100);\n  };\n}\n\nclass ReadingProgressElement extends ReadingProgressCore {\n  rootEl: HTMLElement | null;\n  targetEl: HTMLElement | null;\n  constructor({ rootEl, targetEl }: { rootEl: string; targetEl: string }) {\n    super();\n    this.rootEl = document.querySelector(rootEl);\n    this.targetEl = document.querySelector(targetEl);\n  }\n\n  get rootSelector() {\n    return this.rootEl;\n  }\n\n  private measureWrapperHeight = () => {\n    const targetElHeight = this.targetEl?.getBoundingClientRect().height || 0;\n\n    return Math.round(targetElHeight - this.getViewportHeight());\n  };\n\n  getViewportHeight = () => {\n    return this.rootEl?.clientHeight || 0;\n  };\n\n  getProgress = () => {\n    const top = this.rootEl?.scrollTop || 0;\n\n    return Math.round((top / this.measureWrapperHeight()) * 100);\n  };\n}\n\nexport class ReadingProgress {\n  private rp: ReadingProgressCore;\n\n  constructor({ rootEl, targetEl }: { rootEl?: string; targetEl?: string }) {\n    this.rp =\n      typeof rootEl === 'string' && typeof targetEl === 'string'\n        ? new ReadingProgressElement({ rootEl, targetEl })\n        : new ReadingProgressWindow();\n  }\n\n  get rootSelector() {\n    return this.rp.rootSelector;\n  }\n\n  getViewportHeight = () => {\n    return this.rp.getViewportHeight();\n  };\n\n  getProgress = () => {\n    return this.rp.getProgress();\n  };\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { HookProps } from './type';\nimport { optimization } from '../utils';\nimport { ReadingProgress } from './core';\n\nexport const useReadingProgress = (props?: HookProps) => {\n  const rp = useRef<ReadingProgress>();\n\n  useEffect(() => {\n    rp.current = new ReadingProgress({\n      rootEl: props?.rootEl,\n      targetEl: props?.targetEl,\n    });\n  }, [props]);\n\n  const [value, updateProgressValue] = useState(rp.current?.getProgress() || 0);\n\n  const update = useCallback(() => {\n    updateProgressValue(rp.current?.getProgress() || 0);\n  }, []);\n  const debounceUpdate = useCallback(\n    optimization.debounce(() => {\n      update();\n    }),\n    []\n  );\n\n  useEffect(() => {\n    if (rp.current?.rootSelector) {\n      rp.current.rootSelector.addEventListener('scroll', debounceUpdate);\n    }\n    window.addEventListener('resize', debounceUpdate);\n    update();\n\n    return () => {\n      if (rp.current?.rootSelector) {\n        rp.current.rootSelector.removeEventListener('scroll', debounceUpdate);\n      }\n      window.removeEventListener('resize', debounceUpdate);\n    };\n  }, [update, debounceUpdate]);\n\n  return {\n    value,\n  };\n};\n","import { ComponentProps } from './type';\nimport { useReadingProgress } from './useReadingProgress';\n\nexport { useReadingProgress };\n\nexport const ReadingProgress = ({\n  targetEl,\n  rootEl,\n  children,\n}: ComponentProps) => {\n  const readingProgress = useReadingProgress({\n    targetEl,\n    rootEl,\n  });\n\n  return children(readingProgress);\n};\n","export abstract class Root {\n  abstract get outerHeight(): number;\n  abstract get scrollTop(): number;\n  abstract get scrollHeight(): number;\n  abstract isScrolledToBottom(): boolean;\n  abstract registerScrollEvent(callback: () => void): void;\n  abstract unregisterScrollEvent(callback: () => void): void;\n}\n","import { Root } from './type';\n\nexport class RootEl extends Root {\n  el: HTMLElement;\n\n  constructor(el: HTMLElement) {\n    super();\n    this.el = el;\n  }\n\n  get top() {\n    return this.el.getBoundingClientRect().top;\n  }\n\n  get outerHeight() {\n    return this.el.getBoundingClientRect().height;\n  }\n\n  get scrollTop() {\n    return this.el.scrollTop;\n  }\n\n  get scrollHeight() {\n    return this.el.scrollHeight;\n  }\n\n  isScrolledToBottom() {\n    return this.scrollTop + this.outerHeight >= this.scrollHeight;\n  }\n\n  registerScrollEvent(callback: () => void) {\n    this.el.addEventListener('scroll', callback);\n  }\n\n  unregisterScrollEvent(callback: () => void) {\n    this.el.removeEventListener('scroll', callback);\n  }\n\n  static create(selector: string) {\n    const el = document.querySelector(selector);\n\n    if (!el) {\n      throw new Error('element is not found.');\n    }\n    return new RootEl(el as HTMLElement);\n  }\n}\n","import { Root } from './type';\n\nexport class RootWindow extends Root {\n  get outerHeight() {\n    return window.innerHeight;\n  }\n\n  get scrollTop() {\n    return document.documentElement.scrollTop;\n  }\n\n  get scrollHeight() {\n    return document.documentElement.scrollHeight;\n  }\n\n  isScrolledToBottom() {\n    return this.scrollTop + this.outerHeight >= this.scrollHeight;\n  }\n\n  registerScrollEvent(callback: () => void) {\n    document.addEventListener('scroll', callback);\n  }\n\n  unregisterScrollEvent(callback: () => void) {\n    document.removeEventListener('scroll', callback);\n  }\n\n  static create() {\n    return new RootWindow();\n  }\n}\n","import { RootEl } from './RootEl';\nimport { RootWindow } from './RootWindow';\n\nexport class RootFactory {\n  static create(selector?: string): RootEl | RootWindow {\n    if (!selector) {\n      return RootWindow.create();\n    }\n    return RootEl.create(selector);\n  }\n}\n","import {\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { RootEl } from './RootEl';\nimport { RootWindow } from './RootWindow';\nimport { RootFactory } from './RootFactory';\n\nexport const useScrollspy = ({\n  sectionRefs,\n  rootSelector,\n  offset = 0,\n}: {\n  sectionRefs: RefObject<Element>[];\n  rootSelector?: string;\n  offset?: number;\n}) => {\n  const rootEl = useRef<RootWindow | RootEl | null>(null);\n\n  useEffect(() => {\n    rootEl.current = RootFactory.create(rootSelector);\n  }, [rootSelector]);\n\n  const isScrolledToBottom = useCallback(() => {\n    if (!rootEl.current) {\n      return false;\n    }\n    return rootEl.current.isScrolledToBottom();\n  }, [rootEl]);\n\n  const isElementInViewport = useCallback(\n    (element: Element) => {\n      if (!rootEl.current) {\n        return false;\n      }\n      const innerScrollTop = rootEl.current.scrollTop;\n      const innerScrollBottom = innerScrollTop + rootEl.current.outerHeight;\n      const elementRect = element.getBoundingClientRect();\n      const elementScrollTop =\n        rootEl.current instanceof RootEl\n          ? innerScrollTop + elementRect.top - rootEl.current.top + offset\n          : innerScrollTop + elementRect.top + offset;\n      const elementScrollBottom = elementScrollTop + elementRect.height;\n\n      return [\n        elementScrollTop < innerScrollBottom,\n        elementScrollBottom > innerScrollTop,\n      ].every(v => v);\n    },\n    [rootEl, offset]\n  );\n\n  const getElementsStatusInViewport = useCallback(() => {\n    return sectionRefs.map(sectionRef => {\n      if (sectionRef.current) {\n        return isElementInViewport(sectionRef.current);\n      }\n      return false;\n    });\n  }, [isElementInViewport, sectionRefs]);\n\n  const [elementsStatusInViewport, updateElementsStatusInViewport] = useState<\n    boolean[]\n  >([]);\n\n  const currentElementIndexInViewport = useMemo(\n    () => elementsStatusInViewport.findIndex(status => status),\n    [elementsStatusInViewport]\n  );\n\n  const spy = useCallback(() => {\n    const newElementsStatusInViewport = isScrolledToBottom()\n      ? [...new Array(sectionRefs.length - 1).fill(false).map(v => v), true]\n      : getElementsStatusInViewport();\n    updateElementsStatusInViewport(newElementsStatusInViewport);\n  }, [getElementsStatusInViewport, isScrolledToBottom, sectionRefs]);\n\n  useEffect(() => {\n    spy();\n    if (rootEl.current) {\n      rootEl.current.registerScrollEvent(spy);\n    }\n\n    return () => {\n      if (rootEl.current) {\n        rootEl.current.unregisterScrollEvent(spy);\n      }\n    };\n  }, [spy]);\n\n  return {\n    elementsStatusInViewport,\n    currentElementIndexInViewport,\n  };\n};\n","import { RefObject } from 'react';\nimport { useScrollspy } from './useScrollspy';\n\nexport { useScrollspy };\n\nexport const Scrollspy = ({\n  children,\n  sectionRefs,\n  rootSelector,\n  offset,\n}: {\n  children: ({\n    elementsStatusInViewport,\n    currentElementIndexInViewport,\n  }: {\n    elementsStatusInViewport: boolean[];\n    currentElementIndexInViewport: number;\n  }) => JSX.Element;\n  sectionRefs: RefObject<Element>[];\n  rootSelector?: string;\n  offset?: number;\n}) => {\n  const {\n    elementsStatusInViewport,\n    currentElementIndexInViewport,\n  } = useScrollspy({\n    sectionRefs,\n    rootSelector,\n    offset,\n  });\n\n  return children({\n    elementsStatusInViewport,\n    currentElementIndexInViewport,\n  });\n};\n","export class Pagination {\n  private currentPage: number;\n  private totalPage: number;\n  private middlePagesSiblingCount: number;\n  private edgePageCount: number;\n\n  constructor({\n    currentPage,\n    totalPage,\n    middlePagesSiblingCount = 2,\n    edgePageCount = 2,\n  }: {\n    currentPage: number;\n    totalPage: number;\n    middlePagesSiblingCount?: number;\n    edgePageCount?: number;\n  }) {\n    this.currentPage = currentPage;\n    this.totalPage = totalPage;\n    this.middlePagesSiblingCount = middlePagesSiblingCount;\n    this.edgePageCount = edgePageCount;\n  }\n\n  private getAllPages = () => {\n    return [...Array(this.totalPage)].fill(1).map((_, i) => i + 1);\n  };\n\n  private getMiddlePageCount = () => {\n    return this.middlePagesSiblingCount * 2 + 1;\n  };\n\n  private isReachedToFirst = () =>\n    this.currentPage <= this.middlePagesSiblingCount;\n  private isReachedToLast = () =>\n    this.currentPage + this.middlePagesSiblingCount >= this.totalPage;\n\n  private getAllPreviousPages = () => {\n    return this.getAllPages().slice(0, this.getMiddlePages()[0] - 1);\n  };\n\n  private getAllNextPages = () => {\n    const totalPageItems = this.getAllPages();\n    const middlePages = this.getMiddlePages();\n\n    return totalPageItems.slice(\n      middlePages[middlePages.length - 1],\n      totalPageItems[totalPageItems.length]\n    );\n  };\n\n  hasPreviousPage = () => this.currentPage > 1;\n  hasNextPage = () => this.totalPage > this.currentPage;\n\n  getMiddlePages = () => {\n    const totalPageItems = this.getAllPages();\n    const middlePageCount = this.getMiddlePageCount();\n    if (this.isReachedToFirst()) {\n      return totalPageItems.slice(0, middlePageCount);\n    }\n    if (this.isReachedToLast()) {\n      return totalPageItems.slice(-middlePageCount);\n    }\n    return totalPageItems.slice(\n      this.currentPage - this.middlePagesSiblingCount - 1,\n      this.currentPage + this.middlePagesSiblingCount\n    );\n  };\n\n  getPreviousPages = () => {\n    if (this.isReachedToFirst()) {\n      return [];\n    }\n    if (this.getAllPreviousPages().length < 1) {\n      return [];\n    }\n    return this.getAllPages()\n      .slice(0, this.edgePageCount)\n      .filter(p => !this.getMiddlePages().includes(p));\n  };\n\n  getNextPages = () => {\n    if (this.isReachedToLast()) {\n      return [];\n    }\n    if (this.getAllNextPages().length < 1) {\n      return [];\n    }\n    const totalPages = this.getAllPages();\n    return totalPages\n      .slice(totalPages.length - this.edgePageCount, totalPages.length)\n      .filter(p => !this.getMiddlePages().includes(p));\n  };\n\n  isPreviousTruncable = () => {\n    return (\n      this.getAllPreviousPages().filter(\n        p =>\n          !this.getPreviousPages().includes(p) &&\n          !this.getMiddlePages().includes(p)\n      ).length > 0\n    );\n  };\n\n  isNextTruncable = () => {\n    return (\n      this.getAllNextPages().filter(\n        p =>\n          !this.getNextPages().includes(p) && !this.getMiddlePages().includes(p)\n      ).length > 0\n    );\n  };\n}\n","import { useMemo } from 'react';\nimport { Pagination } from './core';\nimport { UsePagination } from './types';\n\nconst MIDDLE_PAGES_SIBLING_COUNT = 2;\nconst EDGE_PAGE_COUNT = 2;\n\nexport const usePagination: UsePagination = ({\n  totalPage,\n  currentPage,\n  middlePagesSiblingCount = MIDDLE_PAGES_SIBLING_COUNT,\n  edgePageCount = EDGE_PAGE_COUNT,\n}) => {\n  const pagination = useMemo(\n    () =>\n      new Pagination({\n        totalPage,\n        currentPage,\n        middlePagesSiblingCount: middlePagesSiblingCount,\n        edgePageCount: edgePageCount,\n      }),\n    [totalPage, currentPage, middlePagesSiblingCount, edgePageCount]\n  );\n\n  return {\n    getMiddlePages: pagination.getMiddlePages,\n    hasPreviousPage: pagination.hasPreviousPage,\n    hasNextPage: pagination.hasNextPage,\n    getPreviousPages: pagination.getPreviousPages,\n    getNextPages: pagination.getNextPages,\n    isPreviousTruncable: pagination.isPreviousTruncable,\n    isNextTruncable: pagination.isNextTruncable,\n    totalPage,\n    currentPage,\n  };\n};\n","import { usePagination } from './usePagination';\nimport { UsePaginationProps } from './types';\n\ntype PaginationProps = {\n  children: (arg0: ReturnType<typeof usePagination>) => JSX.Element;\n} & UsePaginationProps;\n\nexport { usePagination };\n\nexport const Pagination = ({\n  children,\n  totalPage,\n  currentPage,\n  middlePagesSiblingCount,\n  edgePageCount,\n}: PaginationProps) => {\n  const pagination = usePagination({\n    totalPage,\n    currentPage,\n    middlePagesSiblingCount,\n    edgePageCount,\n  });\n\n  return children(pagination);\n};\n"],"names":["debounce","callback","reqID","exec","args","cancelAnimationFrame","requestAnimationFrame","ReadingProgressCore","ReadingProgressWindow","targetElHeihgt","document","body","getBoundingClientRect","height","Math","round","getViewportHeight","max","documentElement","clientHeight","window","innerHeight","top","pageYOffset","scrollTop","measureWrapperHeight","ReadingProgressElement","rootEl","targetEl","targetElHeight","querySelector","ReadingProgress","rp","getProgress","rootSelector","useReadingProgress","props","useRef","useEffect","current","useState","value","updateProgressValue","update","useCallback","debounceUpdate","optimization","addEventListener","removeEventListener","children","readingProgress","Root","RootEl","el","isScrolledToBottom","outerHeight","scrollHeight","registerScrollEvent","unregisterScrollEvent","create","selector","Error","RootWindow","RootFactory","useScrollspy","sectionRefs","offset","isElementInViewport","element","innerScrollTop","innerScrollBottom","elementRect","elementScrollTop","elementScrollBottom","every","v","getElementsStatusInViewport","map","sectionRef","elementsStatusInViewport","updateElementsStatusInViewport","currentElementIndexInViewport","useMemo","findIndex","status","spy","newElementsStatusInViewport","Array","length","fill","Scrollspy","Pagination","currentPage","totalPage","middlePagesSiblingCount","edgePageCount","_","i","getAllPages","slice","getMiddlePages","totalPageItems","middlePages","middlePageCount","getMiddlePageCount","isReachedToFirst","isReachedToLast","getAllPreviousPages","filter","p","includes","getAllNextPages","totalPages","getPreviousPages","getNextPages","MIDDLE_PAGES_SIBLING_COUNT","EDGE_PAGE_COUNT","usePagination","pagination","hasPreviousPage","hasNextPage","isPreviousTruncable","isNextTruncable"],"mappings":"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"}